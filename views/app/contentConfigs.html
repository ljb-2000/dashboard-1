<!--<script language="JavaScript" src="../../static/plugins/jquery-ui/jquery-ui.js"></script>-->
<!--<script language="JavaScript" src="../../static/plugins/jquery-ui/ui/accordion.js"></script>-->

<style>
    .modal-header {
        background-color: #36404a;
        color: aliceblue;
    }
    .panel-default > .panel-heading {
        height: 44px;
    }
    .panel-heading {
        background-color: #ffffff !important;
        border: 1px solid #d4d4d4 !important;
        border-left: 3px solid #3c8dbc !important;
    }
    .ant-timeline-item-tail {
        top: 0;
        height: 100%;
        border-left: 1px solid #d6d6d6;
        display: block;
        height: 70px;
    }
    .line {
        float: left;
        margin-top: 77px;
        margin-left: -2px;
        width: 40px;
        height: 0;
        border-bottom: 1px solid #d6d6d6;
    }
    .ant-timeline .file-item table {
        float: left;
        border-collapse: collapse;
        height: 77px;
        position: absolute;
        margin-top: 35px;
        margin-left: 38px;
    }
    .ant-timeline .file-item table td {
        font-size: 14px;
        min-width: 120px;
        border: 1px solid #d6d6d6;
    }
    .ant-timeline .ant-timeline-item-tail {
        top: -17px;
        height: 100%;
        border-left: 1px solid #d6d6d6;
        margin-left: 16px;
    }
    .ant-timeline-item-last .ant-timeline-item-tail {
        border-left: 2px dotted #e9e9e9;
        display: none;
    }
    .ant-timeline .ant-timeline-item-last .ant-timeline-item-tail {
        display: block;
        height: 100%;
        top: -25px;
        border-left: 1px solid #d6d6d6;
    }
    .ant-collapse-content {
        padding-bottom: 25px !important;
    }
    .ant-timeline .file-item table td .li {
        line-height: 40px;
        padding: 0 15px;
    }
    .ant-timeline .file-item table td .lis {
        line-height: 40px;
        border-top: 1px solid #d6d6d6;
        padding: 0 15px;
    }
    .ant-timeline .file-item table td .node-number {
        background: #5eb85e;
        display: inline-block;
        padding: 3px 7px;
        line-height: normal;
        color: #fff;
        border-radius: 45%;
        margin-left: 10px;
    }

</style>
<link rel="stylesheet" href="/static/plugins/portal/css/index.css">
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>容器服务<small>容器&服务</small>
            <button id="ContainerDetailButton"  href="#" class="btn btn-success"
                    onclick="$('#containerContent').show();$('#ContainerDetail').hide();$('#ContainerDetailButton').hide();" style="display: none">
                <i class="fa fa-backward"></i> BACK
            </button>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i>容器服务</a></li>
            <li><a href="#">容器&服务</a></li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content" id="MainContent">
        <div class="row">
            <div class="col-md-12">
                <div class="box">
                    <div class="box-header" id="tool-bar">
                        <!--<button id="createapp" href="#" class="btn btn-success waves-effect waves-light">-->
                            <!--<i class="fa fa-plus"></i> 创建-->
                        <!--</button>-->

                        <button href="#" class="btn btn-success" onclick="AddNewConfig()">
                            <i class="fa fa-plus"></i><span> 创建配置组</span>
                        </button>
                        <button href="#" class="btn btn-success" disabled="disabled">
                            <i class="fa fa-trash-o"></i><span> 删除</span>
                        </button>
                    </div>
                </div>
            </div>
            <!-- /.col -->
        </div>

        <div class="row">
            <div class="col-md-12">
                <div id="config-tab-div" class="panel-group"></div>
            </div>
            <!-- /.col -->
        </div>



    </section>


</div>
<div id="editConfigFile" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModelLabel">
    <div class="modal-dialog" role="document" style="width: 675px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 id="myModalLabel">修改配置文件</h3>
            </div>
            <div class="modal-body">
                <div class="configFile-inf" style="padding: 0px 10px;">
                    <div class="configFile-tip" style="color: rgb(22, 163, 234); height: 35px; text-indent: 10px;"><!-- react-text: 13 -->&nbsp;&nbsp;&nbsp;<!-- /react-text -->
                        <i class="anticon anticon-info-circle-o" style="margin-right: 10px;"></i>
                        <!-- react-text: 15 -->即将保存一个配置文件 , 您可以在创建应用 → 添加服务时 , 关联使用该配置<!-- /react-text -->
                    </div>
                    <form class="ant-form ant-form-horizontal">
                        <div class="ant-row ant-form-item">
                            <div class="ant-col-2 ant-form-item-label">
                                <label class="">名称</label>
                            </div>
                            <div class="ant-col-21">
                                <div class="ant-form-item-control ">
                                    <span class="ant-input-wrapper">
                                        <input id="ConfigFileName" type="text" disabled="" value="config1-file1" class="ant-input ant-input-lg">
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="ant-row ant-form-item">
                            <div class="ant-col-2 ant-form-item-label">
                                <label for="configDesc" class="">内容</label>
                            </div>
                            <div class="ant-col-21">
                                <div class="ant-form-item-control has-success">
                                    <span class="ant-input-wrapper">
                                        <textarea type="textarea" id="configDesc" data-__meta="[object Object]" class="ant-input ant-input-lg" style="min-height: 300px;"></textarea>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer" style="text-align: center">
                <button type="button" class="ant-btn ant-btn-ghost ant-btn-lg cancelBtn" style="width: 100px" onclick="$('#editConfigFile').modal('hide')"><span>取 消</span></button>
                <button type="submit" class="ant-btn ant-btn-primary ant-btn-lg createBtn" onclick="createConfigFile()" style="width: 100px"><span>创 建</span></button>
            </div>
            <!--<div class="modal-footer">-->
            <!--<button class="btn btn-primary" id="create-step">下一步</button>-->
            <!--</div>-->
        </div>
    </div>
</div>
<div id="AddNewConfig" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModelLabel">
    <div class="modal-dialog" role="document" style="width: 400px">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 id="">创建配置组</h3>
            </div>
            <div class="modal-body">
                <form class="ant-form ant-form-horizontal">
                    <div class="ant-row" style="padding-top: 10px;">
                        <div class="">
                            <div class="ant-row ant-form-item">
                                <div class="ant-col-3 ant-form-item-label">
                                    <label for="newConfigName" class="">名称</label>
                                </div>
                                <div class="ant-col-18">
                                    <div class="ant-form-item-control ">
                                        <span class="ant-input-wrapper">
                                            <input type="text" id="newConfigName" value="" data-__meta="[object Object]" class="ant-input ant-input-lg">
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="text-align: center">
                <button type="button" class="ant-btn ant-btn-ghost ant-btn-lg cancelBtn" style="width: 100px" onclick="$('#AddNewConfig').modal('hide')"><span>取 消</span></button>
                <button type="submit" class="ant-btn ant-btn-primary ant-btn-lg createBtn" onclick="createNewConfig()" style="width: 100px"><span>创 建</span></button>
            </div>
            <!--<div class="modal-footer">-->
            <!--<button class="btn btn-primary" id="create-step">下一步</button>-->
            <!--</div>-->
        </div>
    </div>
</div>
<script>
    var config = {"data":[{"name":"config1","configs":[{"name":"config1-file1","rawName":"config1-file1"},{"name":"config1-file2","rawName":"config1-file2"}],"creationTimestamp":"2017-06-03T01:58:34Z","size":2},{"name":"confog2","configs":[],"creationTimestamp":"2017-06-03T02:01:10Z","size":0},{"name":"confog3","configs":[],"creationTimestamp":"2017-06-03T02:41:26Z","size":0}],"cluster":"CID-fab5b135e7b2"}
    $(document).ready(function () {
        drawConfig()
    })
    function drawConfig() {
        var str = ""
        for(var a=0; a<config.data.length; a++){
            var data = config.data[a]
            str += "<div class='panel panel-default'>"
            str +=      "<div class='panel-heading'>"
            str +=          "<h4 class='panel-title'>"
            str +=              "<a data-toggle='collapse' data-parent='#config-tab-div' href='#"+data.name+"' aria-expanded='false' class='collapsed'>"
            str +=                  "<table><tr><td style='width: 8%'><input type='checkbox'/></td><td style='width: 25%'>"+ data.name +"</td>" +
                "<td style='width: 25%'>配置文件  "+data.configs.length+"个</td>" +
                "<td style='width: 25%'>创建时间  3 小时前</td>" +
                "<td style='width: 25%'><button href='#' class='btn btn-info btn-xs' onclick=\"addConfigFile('"+ data.name +"')\"><i class='fa fa-plus' ></i>" +
                "<span>  配置文件</span></button><button href='#' class='btn btn-xs' style='margin-left: 7px'><i class='fa fa-trash-o'></i>" +
                "<span>   删除配置组</span></button></td></tr></table>"
            str +=              "</a>"
            str +=          "</h4>"
            str +=      "</div>"
            str +=      "<div id='"+ data.name +"' class='panel-collapse collapse' aria-expanded='false' style='height: 0px;'>"
            str +=          "<div class='panel-body' style='padding: 0px !important;'>"
            str +=              "<div class='ant-collapse-content ant-collapse-content-active' role='tabpanel'>"
            str +=                  "<div class='ant-collapse-content-box'>"
            str +=                      "<div class='ant-row file-list'>"
            str +=                          "<ul class='ant-timeline'>"
            for(var b=0; b<data.configs.length; b++){
                if(b == data.configs.length-1){
                    str +=                              "<li class='ant-timeline-item ant-timeline-item-last'>"
                }else{
                    str +=                              "<li class='ant-timeline-item'>"
                }

                str +=                                  "<div class='ant-timeline-item-tail'></div>"
//                str +=                                  "<div class='ant-timeline-item-head ant-timeline-item-head-blue'></div>"
                str +=                                  "<div class='ant-timeline-item-content'>"
                str +=                                      "<div class='ant-row file-item'>"
                str +=                                          "<div class='line'></div>"
                str +=                                              "<table><tbody><tr><td style='padding: 15px;'>" +
                    "<div class='textoverflow' style='width: 160px;'><i class='anticon anticon-file-text' " +
                    "style='margin-right: 10px;'></i>"+ data.configs[b].name +"</div></td><td style='padding: 15px 20px;'>" +
                    "<button type='button' class='ant-btn ant-btn-primary' style='height: 30px; padding: 0px 9px;' onclick=\"editConfigFile('"+ data.configs[b].name +"')\">" +
                    "<i class='anticon anticon-edit'></i></button><button type='button' class='ant-btn ant-btn-ghost config-cross' " +
                    "style='margin-left: 10px; height: 30px; padding: 0px 9px; background-color: rgb(255, 255, 255);'>" +
                    "<i class='anticon anticon-cross'></i></button></td><td style='width: 130px;'>" +
                    "<div class='li'>关联服务<span class='node-number'>0</span></div><div class='lis'>挂载路径</div></td>" +
                    "<td style='text-align: center;'><div>暂无挂载</div></td></tr></tbody></table>"
                str +=                                          "</div>"
                str +=                                      "</div>"
                str +=                                  "</li>"
            }

            str +=                              "</ul>"
            str +=                          "</div>"
            str +=                      "</div>"
            str +=                  "</div>"
//            str +=              "Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS."
            str +=          "</div>"
            str +=      "</div>"
            str +=  "</div>"
        }
        $("#config-tab-div").html(str)
    }

    function editConfigFile(file) {
        $("#editConfigFile").modal("show")
        $("#ConfigFileName").val(file)
        $("#ConfigFileName").attr("disabled",true)

    }
    function AddNewConfig() {
        $("#AddNewConfig").modal("show")
    }
    function addConfigFile(name) {
        $("#editConfigFile").modal("show")
        $("#ConfigFileName").attr("disabled",false)
        $("#ConfigFileName").val("")
        $("#configDesc").val("")
        $("#ConfigFileName").attr("configName",name)
        setTimeout(function () {
            if(!$("#"+name).hasClass("in")){
                $("#"+name).addClass("in").removeAttr("style")
                $("#"+name).parent().find("div h4 a").eq(0).attr("aria-expanded",true).removeClass("collapsed")
            }
        },500)
            }
    function createNewConfig() {
        var data = {
            "configs": [],
            "name": $("#newConfigName").val()
        }
        config.data.push(data)
        drawConfig()
        $("#newConfigName").val("")
        $("#configDesc").val("")
        $("#AddNewConfig").modal("hide")
    }
    function createConfigFile() {
        $("#editConfigFile").modal("hide")
        for(var a=0; a<config.data.length; a++){
            if(config.data[a].name == $("#ConfigFileName").attr("configName")){
                config.data[a].configs.push({
                    "name": $("#ConfigFileName").val(),
                    "rawName": $("#ConfigFileName").val()
                })
                break
            }
        }
        drawConfig()

    }
</script>